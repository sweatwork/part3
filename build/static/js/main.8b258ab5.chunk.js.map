{"version":3,"sources":["components/Filter.js","components/PersonForm.js","services/persons.js","components/Persons.js","components/Notification.js","components/ErrorNotification.js","App.js","index.js"],"names":["Filter","searchName","handleSearchName","value","onChange","PersonForm","addPerson","newName","handleNameChange","newNumber","handleNumberChange","onSubmit","type","baseUrl","axios","get","then","response","data","catch","error","statusText","personObject","post","id","delete","status","put","Persons","personsToShow","persons","setPersons","map","person","className","key","name","number","onClick","window","confirm","personService","alert","filter","Notification","message","ErrorNotification","App","useState","setNewName","setNewNumber","setSearchName","showAll","setShowAll","displayMessage","setDisplayMessage","errorMessage","setErrorMessage","useEffect","initialPersons","toLowerCase","includes","event","target","preventDefault","duplicatePerson","find","changedPerson","setTimeout","returnedPerson","concat","ReactDOM","render","document","getElementById"],"mappings":"0NAWeA,EATA,SAAC,GAAsC,IAApCC,EAAmC,EAAnCA,WAAYC,EAAuB,EAAvBA,iBAC5B,OACE,iDAEE,2BAAOC,MAAOF,EAAYG,SAAUF,MCkB3BG,EAtBI,SAAC,GAMb,IALLC,EAKI,EALJA,UACAC,EAII,EAJJA,QACAC,EAGI,EAHJA,iBACAC,EAEI,EAFJA,UACAC,EACI,EADJA,mBAEA,OACE,0BAAMC,SAAUL,GACd,sCACQ,2BAAOH,MAAOI,EAASH,SAAUI,KAEzC,wCACU,2BAAOL,MAAOM,EAAWL,SAAUM,KAE7C,6BACE,4BAAQE,KAAK,UAAb,U,gBCjBFC,EAAU,eA4BD,EA1BA,WAEb,OADgBC,IAAMC,IAAIF,GAEvBG,MAAK,SAACC,GAAD,OAAcA,EAASC,QAC5BC,OAAM,SAACC,GAAD,OAAWA,EAAMH,SAASI,eAsBtB,EAnBA,SAACC,GAEd,OADgBR,IAAMS,KAAKV,EAASS,GACrBN,MAAK,SAACC,GAAD,OAAcA,EAASC,SAiB9B,EAdH,SAACM,GAEX,OADgBV,IAAMW,OAAN,UAAgBZ,EAAhB,YAA2BW,IAExCR,MAAK,SAACC,GAAD,OAAcA,EAASS,UAC5BP,OAAM,SAACC,GAAD,OAAWA,EAAMH,SAASS,WAUtB,EAPA,SAACF,EAAIF,GAElB,OADgBR,IAAMa,IAAN,UAAad,EAAb,YAAwBW,GAAMF,GAE3CN,MAAK,SAACC,GAAD,OAAcA,EAASC,QAC5BC,OAAM,SAACC,GAAD,OAAWA,EAAMH,SAASS,WCItBE,EA3BC,SAAC,GAA4C,IAA1CC,EAAyC,EAAzCA,cAAeC,EAA0B,EAA1BA,QAASC,EAAiB,EAAjBA,WAkBzC,OAAOF,EAAcG,KAAI,SAACC,GAAD,OACvB,yBAAKC,UAAU,SAASC,IAAKF,EAAOT,IACjCS,EAAOG,KADV,IACiBH,EAAOI,OACtB,4BAAQC,QAAS,kBApBCF,EAoBkBH,EAAOG,KApBnBZ,EAoByBS,EAAOT,QAnB5Ce,OAAOC,QAAP,iBAAyBJ,EAAzB,QAEZK,EAAkBjB,GAAIR,MAAK,SAACC,GACT,MAAbA,EACFyB,MAAM,GAAD,OAAIN,EAAJ,gBACiB,MAAbnB,GACTc,EACED,EAAQa,QAAO,SAACV,GACd,OAAOA,EAAOT,KAAOA,UATZ,IAACY,EAAMZ,IAoBxB,eCdSoB,EARM,SAAC,GAAiB,IAAfC,EAAc,EAAdA,QACtB,OAAgB,OAAZA,EACK,KAGF,yBAAKX,UAAU,WAAWW,ICGpBC,EARW,SAAC,GAAe,IAAb1B,EAAY,EAAZA,MAC3B,OAAc,OAAVA,EACK,KAGF,yBAAKc,UAAU,SAASd,ICuHlB2B,EAtHH,WAAO,IAAD,EACcC,mBAAS,IADvB,mBACTlB,EADS,KACAC,EADA,OAEciB,mBAAS,IAFvB,mBAETzC,EAFS,KAEA0C,EAFA,OAGkBD,mBAAS,IAH3B,mBAGTvC,EAHS,KAGEyC,EAHF,OAIoBF,mBAAS,IAJ7B,mBAIT/C,EAJS,KAIGkD,EAJH,OAKcH,oBAAS,GALvB,mBAKTI,EALS,KAKAC,EALA,OAM4BL,mBAAS,MANrC,mBAMTM,EANS,KAMOC,EANP,OAOwBP,mBAAS,MAPjC,mBAOTQ,EAPS,KAOKC,EAPL,KAShBC,qBAAU,WACRjB,IAAuBzB,MAAK,SAAC2C,GACJ,cAAnBA,EACF5B,EAAW4B,GAEXjB,MAAM,GAAD,OAAIiB,SAGZ,IAEH,IA8DM9B,EAAgBuB,EAClBtB,EACAA,EAAQa,QAAO,SAACV,GAAD,OACbA,EAAOG,KAAKwB,cAAcC,SAAS5D,EAAW2D,kBAUpD,OACE,6BACE,yCACA,kBAAC,EAAD,CAAcf,QAASS,IACvB,kBAAC,EAAD,CAAmBlC,MAAOoC,IAC1B,kBAAC,EAAD,CAAQvD,WAAYA,EAAYC,iBAVX,SAAC4D,GACxBX,EAAcW,EAAMC,OAAO5D,OAC3BkD,GAAW,MAST,yCACA,kBAAC,EAAD,CACE/C,UAnFY,SAACwD,GACjBA,EAAME,iBAEN,IAAM1C,EAAe,CACnBc,KAAM7B,EACN8B,OAAQ5B,GAGJwD,EAAkBnC,EAAQoC,MAC9B,SAACjC,GAAD,OAAYA,EAAOG,OAASd,EAAac,QAG3C,GAAK6B,GAYH,GAHqB1B,OAAOC,QAAP,UAChBlB,EAAac,KADG,2EAGH,CAChB,IAAMH,EAASH,EAAQoC,MACrB,SAACjC,GAAD,OAAYA,EAAOT,KAAOyC,EAAgBzC,MAEtC2C,EAAa,2BAAQlC,GAAR,IAAgBI,OAAQf,EAAae,SACxDI,EACU0B,EAAc3C,GAAI2C,GACzBnD,MAAK,SAACC,GACY,MAAbA,GACFsC,EAAkB,WAAD,OAAYY,EAAc/B,OAC3CgC,YAAW,WACTb,EAAkB,QACjB,KACHxB,EACED,EAAQE,KAAI,SAACC,GAAD,OACVA,EAAOT,KAAO2C,EAAc3C,GAAKS,EAAShB,QAI9CwC,EAAgB,GAAD,OACVU,EAAc/B,KADJ,0CAGfgC,YAAW,WACTX,EAAgB,QACf,KAEH1B,EACED,EAAQa,QAAO,SAACV,GAAD,OAAYA,EAAOT,KAAO2C,EAAc3C,iBAtCjEiB,EAAqBnB,GAAcN,MAAK,SAACqD,GACvCd,EAAkB,SAAD,OAAUc,EAAejC,OAC1CgC,YAAW,WACTb,EAAkB,QACjB,KACHxB,EAAWD,EAAQwC,OAAOD,OAwC9BpB,EAAW,IACXC,EAAa,KAyBT3C,QAASA,EACTC,iBAjBmB,SAACsD,GAAD,OAAWb,EAAWa,EAAMC,OAAO5D,QAkBtDM,UAAWA,EACXC,mBAlBqB,SAACoD,GAAD,OAAWZ,EAAaY,EAAMC,OAAO5D,UAoB5D,uCACA,kBAAC,EAAD,CACE0B,cAAeA,EACfC,QAASA,EACTC,WAAYA,M,MClHpBwC,IAASC,OAAO,kBAAC,EAAD,MAASC,SAASC,eAAe,W","file":"static/js/main.8b258ab5.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nconst Filter = ({ searchName, handleSearchName }) => {\r\n  return (\r\n    <div>\r\n      filter shown with\r\n      <input value={searchName} onChange={handleSearchName} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Filter;\r\n","import React from \"react\";\r\n\r\nconst PersonForm = ({\r\n  addPerson,\r\n  newName,\r\n  handleNameChange,\r\n  newNumber,\r\n  handleNumberChange,\r\n}) => {\r\n  return (\r\n    <form onSubmit={addPerson}>\r\n      <div>\r\n        name: <input value={newName} onChange={handleNameChange} />\r\n      </div>\r\n      <div>\r\n        number: <input value={newNumber} onChange={handleNumberChange} />\r\n      </div>\r\n      <div>\r\n        <button type=\"submit\">add</button>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default PersonForm;\r\n","import axios from \"axios\";\r\nconst baseUrl = \"/api/persons\";\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl);\r\n  return request\r\n    .then((response) => response.data)\r\n    .catch((error) => error.response.statusText);\r\n};\r\n\r\nconst create = (personObject) => {\r\n  const request = axios.post(baseUrl, personObject);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nconst del = (id) => {\r\n  const request = axios.delete(`${baseUrl}/${id}`);\r\n  return request\r\n    .then((response) => response.status)\r\n    .catch((error) => error.response.status);\r\n};\r\n\r\nconst update = (id, personObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, personObject);\r\n  return request\r\n    .then((response) => response.data)\r\n    .catch((error) => error.response.status);\r\n};\r\n\r\nexport default { getAll, create, del, update };\r\n","import React from \"react\";\r\nimport personService from \"../services/persons\";\r\n\r\nconst Persons = ({ personsToShow, persons, setPersons }) => {\r\n  const deletePerson = (name, id) => {\r\n    const input = window.confirm(`Delete ${name} ?`);\r\n    if (input) {\r\n      personService.del(id).then((response) => {\r\n        if (response === 404) {\r\n          alert(`${name} not found.`);\r\n        } else if (response === 204) {\r\n          setPersons(\r\n            persons.filter((person) => {\r\n              return person.id !== id;\r\n            })\r\n          );\r\n        }\r\n      });\r\n    }\r\n  };\r\n\r\n  return personsToShow.map((person) => (\r\n    <div className=\"person\" key={person.id}>\r\n      {person.name} {person.number}\r\n      <button onClick={() => deletePerson(person.name, person.id)}>\r\n        delete\r\n      </button>\r\n    </div>\r\n  ));\r\n};\r\nexport default Persons;\r\n","import React from \"react\";\r\n\r\nconst Notification = ({ message }) => {\r\n  if (message === null) {\r\n    return null;\r\n  }\r\n\r\n  return <div className=\"message\">{message}</div>;\r\n};\r\n\r\nexport default Notification;\r\n","import React from \"react\";\r\n\r\nconst ErrorNotification = ({ error }) => {\r\n  if (error === null) {\r\n    return null;\r\n  }\r\n\r\n  return <div className=\"error\">{error}</div>;\r\n};\r\n\r\nexport default ErrorNotification;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport Filter from \"./components/Filter\";\r\nimport PersonForm from \"./components/PersonForm\";\r\nimport Persons from \"./components/Persons\";\r\nimport personService from \"./services/persons\";\r\nimport Notification from \"./components/Notification\";\r\nimport ErrorNotification from \"./components/ErrorNotification\";\r\n\r\nconst App = () => {\r\n  const [persons, setPersons] = useState([]);\r\n  const [newName, setNewName] = useState(\"\");\r\n  const [newNumber, setNewNumber] = useState(\"\");\r\n  const [searchName, setSearchName] = useState(\"\");\r\n  const [showAll, setShowAll] = useState(true);\r\n  const [displayMessage, setDisplayMessage] = useState(null);\r\n  const [errorMessage, setErrorMessage] = useState(null);\r\n\r\n  useEffect(() => {\r\n    personService.getAll().then((initialPersons) => {\r\n      if (initialPersons !== \"Not Found\") {\r\n        setPersons(initialPersons);\r\n      } else {\r\n        alert(`${initialPersons}`);\r\n      }\r\n    });\r\n  }, []);\r\n\r\n  const addPerson = (event) => {\r\n    event.preventDefault();\r\n\r\n    const personObject = {\r\n      name: newName,\r\n      number: newNumber,\r\n    };\r\n\r\n    const duplicatePerson = persons.find(\r\n      (person) => person.name === personObject.name\r\n    );\r\n\r\n    if (!duplicatePerson) {\r\n      personService.create(personObject).then((returnedPerson) => {\r\n        setDisplayMessage(`Added ${returnedPerson.name}`);\r\n        setTimeout(() => {\r\n          setDisplayMessage(null);\r\n        }, 2000);\r\n        setPersons(persons.concat(returnedPerson));\r\n      });\r\n    } else {\r\n      const userResponse = window.confirm(\r\n        `${personObject.name} is already added to phonebook, replace the old number with a new one?`\r\n      );\r\n      if (userResponse) {\r\n        const person = persons.find(\r\n          (person) => person.id === duplicatePerson.id\r\n        );\r\n        const changedPerson = { ...person, number: personObject.number };\r\n        personService\r\n          .update(changedPerson.id, changedPerson)\r\n          .then((response) => {\r\n            if (response !== 404) {\r\n              setDisplayMessage(`Updated ${changedPerson.name}`);\r\n              setTimeout(() => {\r\n                setDisplayMessage(null);\r\n              }, 3000);\r\n              setPersons(\r\n                persons.map((person) =>\r\n                  person.id !== changedPerson.id ? person : response\r\n                )\r\n              );\r\n            } else {\r\n              setErrorMessage(\r\n                `${changedPerson.name} has already been removed from server`\r\n              );\r\n              setTimeout(() => {\r\n                setErrorMessage(null);\r\n              }, 3000);\r\n\r\n              setPersons(\r\n                persons.filter((person) => person.id !== changedPerson.id)\r\n              );\r\n            }\r\n          });\r\n      }\r\n    }\r\n\r\n    setNewName(\"\");\r\n    setNewNumber(\"\");\r\n  };\r\n\r\n  const personsToShow = showAll\r\n    ? persons\r\n    : persons.filter((person) =>\r\n        person.name.toLowerCase().includes(searchName.toLowerCase())\r\n      );\r\n\r\n  const handleNameChange = (event) => setNewName(event.target.value);\r\n  const handleNumberChange = (event) => setNewNumber(event.target.value);\r\n  const handleSearchName = (event) => {\r\n    setSearchName(event.target.value);\r\n    setShowAll(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <Notification message={displayMessage} />\r\n      <ErrorNotification error={errorMessage} />\r\n      <Filter searchName={searchName} handleSearchName={handleSearchName} />\r\n      <h2>add a new</h2>\r\n      <PersonForm\r\n        addPerson={addPerson}\r\n        newName={newName}\r\n        handleNameChange={handleNameChange}\r\n        newNumber={newNumber}\r\n        handleNumberChange={handleNumberChange}\r\n      />\r\n      <h2>Numbers</h2>\r\n      <Persons\r\n        personsToShow={personsToShow}\r\n        persons={persons}\r\n        setPersons={setPersons}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport './index.css'\n\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}